<html th:replace="~{Admin/Adminbase::layout(~{::main})}">
<body>
	<main>
		<div class="row">
			<div class="col-sm-12">
				<div class="card shadow-lg border-0">
					
					<!-- Header -->
					<div class="card-header bg-success text-white text-center py-3 rounded-top">
						<h3 class="fw-bold mb-0">Verified Merchant</h3>
					</div>
					
					<!-- Body -->
					<div class="card-body bg-light">
						<!-- Table (Desktop) -->
						<div class="table-responsive d-none d-md-block">
							<table class="table table-hover table-bordered align-middle shadow-sm rounded" id="example">
								<thead class="table-success text-dark text-center">
									<tr>
										<th>Sr. No</th>
										<th>Profile Pic</th>
										<th>Merchant Name</th>
										<th>Email</th>
										<th>Contact No</th>
										<th>Aadhar No</th>
										<th>PAN No</th>
										<th>Address</th>
										<th>Reg. Date</th>
										<th>Status</th>
										<th>Action</th>
									</tr>
								</thead>
								<tbody th:each="p, srno: ${merchantList}" class="text-center">
									<tr>
										<td th:text="${srno.index+1}">#1</td>
										<td>
											<img th:if="${p.profilePic != null}" 
											     th:src="@{'/Merchant/profilePic/' + ${p.id}}" 
											     alt="merchant-img"
											     class="rounded-circle border border-success"
											     style="width:60px; height:60px; object-fit:cover;">
											<img th:if="${p.profilePic == null}" 
											     th:src="@{/assets/img/profile.jpg}" 
											     alt="default-img"
											     class="rounded-circle border border-secondary"
											     style="width:60px; height:60px; object-fit:cover;">
										</td>
										<td th:text="${p.name}" class="fw-semibold text-success">ABCD</td>
										<td th:text="${p.email}">example@gmail.com</td>
										<td th:text="${p.contactNumber}">1234xxxx78</td>
										<td th:text="${p.aadharNumber}">99xxxxxxxx80</td>
										<td th:text="${p.panCard}">99xxxxxxxx80</td>
										<td th:text="${p.address}">Unknown Address</td>
										<td th:text="${p.regDate}">DD/MM/YYYY</td>
										<td>
											<a th:href="@{MerchantStatus(id=${p.id})}" th:if="${p.status.name()=='PENDING'}" class="btn btn-warning btn-sm shadow-sm fw-bold" th:text="${p.status}"></a>
											<a th:href="@{MerchantStatus(id=${p.id})}" th:if="${p.status.name()=='APPROVED'}" class="btn btn-success btn-sm shadow-sm fw-bold" th:text="${p.status}"></a>
											<a th:href="@{MerchantStatus(id=${p.id})}" th:if="${p.status.name()=='DISABLED'}" class="btn btn-danger btn-sm shadow-sm fw-bold" th:text="${p.status}"></a>
										</td>
										<td>
											<a href="#" class="btn btn-outline-success btn-sm shadow-sm">Edit</a>
											<a th:href="@{DeletePatient(id=${p.id})}" onclick="return confirm('Are you sure want to delete?')" class="btn btn-outline-danger btn-sm shadow-sm">Delete</a>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<!-- Card Layout (Mobile) -->
						<div class="d-block d-md-none">
							<div th:each="p, srno: ${merchantList}" class="card mb-3 shadow-sm border-0">
								<div class="card-body p-3">
									<div class="d-flex align-items-center mb-2">
										<img th:if="${p.profilePic != null}" 
										     th:src="@{'/Merchant/profilePic/' + ${p.id}}" 
										     alt="merchant-img"
										     class="rounded-circle border border-success me-3"
										     style="width:60px; height:60px; object-fit:cover;">
										<img th:if="${p.profilePic == null}" 
										     th:src="@{/assets/img/profile.jpg}" 
										     alt="default-img"
										     class="rounded-circle border border-secondary me-3"
										     style="width:60px; height:60px; object-fit:cover;">

										<div>
											<h5 class="mb-0 text-success fw-bold" th:text="${p.name}">ABCD</h5>
											<small th:text="${p.email}">example@gmail.com</small>
										</div>
									</div>

									<p class="mb-1"><strong>Contact:</strong> <span th:text="${p.contactNumber}">1234xxxx78</span></p>
									<p class="mb-1"><strong>Aadhar:</strong> <span th:text="${p.aadharNumber}">99xxxxxxxx80</span></p>
									<p class="mb-1"><strong>PAN:</strong> <span th:text="${p.panCard}">99xxxxxxxx80</span></p>
									<p class="mb-1"><strong>Address:</strong> <span th:text="${p.address}">Unknown Address</span></p>
									<p class="mb-2"><strong>Reg. Date:</strong> <span th:text="${p.regDate}">DD/MM/YYYY</span></p>

									<div class="d-flex justify-content-between">
										<div>
											<a th:href="@{MerchantStatus(id=${p.id})}" th:if="${p.status.name()=='PENDING'}" class="btn btn-warning btn-sm fw-bold" th:text="${p.status}"></a>
											<a th:href="@{MerchantStatus(id=${p.id})}" th:if="${p.status.name()=='APPROVED'}" class="btn btn-success btn-sm fw-bold" th:text="${p.status}"></a>
											<a th:href="@{MerchantStatus(id=${p.id})}" th:if="${p.status.name()=='DISABLED'}" class="btn btn-danger btn-sm fw-bold" th:text="${p.status}"></a>
										</div>
										<div>
											<a href="#" class="btn btn-outline-success btn-sm">Edit</a>
											<a th:href="@{DeletePatient(id=${p.id})}" onclick="return confirm('Are you sure want to delete?')" class="btn btn-outline-danger btn-sm">Delete</a>
										</div>
									</div>
								</div>
							</div>
						</div>

					</div>					
				</div>
			</div>
		</div>
	</main>
</body>
</html>
